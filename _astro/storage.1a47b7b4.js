let E=0,p=[];function O(){return E+=1,()=>{if(E-=1,E===0){let e=p;p=[];for(let n of e)n()}}}function k(e){let n=O();return e().finally(n)}let o=[],L=(e,n)=>{let t=[],i={get(){return i.lc||i.listen(()=>{})(),i.value},l:n||0,lc:0,listen(a,l){return i.lc=t.push(a,l||i.l)/2,()=>{let s=t.indexOf(a);~s&&(t.splice(s,2),i.lc--,i.lc||i.off())}},notify(a){let l=!o.length;for(let s=0;s<t.length;s+=2)o.push(t[s],i.value,a,t[s+1]);if(l){for(let s=0;s<o.length;s+=4){let h=!1;for(let u=s+7;u<o.length;u+=4)if(o[u]<o[s+3]){h=!0;break}h?o.push(o[s],o[s+1],o[s+2],o[s+3]):o[s](o[s+1],o[s+2])}o.length=0}},off(){},set(a){i.value!==a&&(i.value=a,i.notify())},subscribe(a,l){let s=i.listen(a,l);return a(i.value),s},value:e};return i};const M=5,g=6,y=10;let N=(e,n,t,i)=>(e.events=e.events||{},e.events[t+y]||(e.events[t+y]=i(a=>{e.events[t].reduceRight((l,s)=>(s(l),l),{shared:{},...a})})),e.events[t]=e.events[t]||[],e.events[t].push(n),()=>{let a=e.events[t],l=a.indexOf(n);a.splice(l,1),a.length||(delete e.events[t],e.events[t+y](),delete e.events[t+y])}),U=1e3,$=(e,n)=>N(e,i=>{let a=n(i);a&&e.events[g].push(a)},M,i=>{let a=e.listen;e.listen=(...s)=>(!e.lc&&!e.active&&(e.active=!0,i()),a(...s));let l=e.off;return e.events[g]=[],e.off=()=>{l(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let s of e.events[g])s();e.events[g]=[]}},U)},()=>{e.listen=a,e.off=l}}),R=(e={})=>{let n=L(e);return n.setKey=function(t,i){typeof i>"u"?t in n.value&&(n.value={...n.value},delete n.value[t],n.notify(t)):n.value[t]!==i&&(n.value={...n.value,[t]:i},n.notify(t))},n},m=e=>e,d={},v={addEventListener(){},removeEventListener(){}};function S(){try{return typeof localStorage<"u"}catch{return!1}}S()&&(d=localStorage);let A={addEventListener(e,n,t){window.addEventListener("storage",n),window.addEventListener("pageshow",t)},removeEventListener(e,n,t){window.removeEventListener("storage",n),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(v=A);function w(e,n={},t={}){let i=t.encode||m,a=t.decode||m,l=R(),s=l.setKey;l.setKey=(r,f)=>{typeof f>"u"?(t.listen!==!1&&v.perKey&&v.removeEventListener(e+r,u,c),delete d[e+r]):(t.listen!==!1&&v.perKey&&!(r in l.value)&&v.addEventListener(e+r,u,c),d[e+r]=i(f)),s(r,f)};let h=l.set;l.set=function(r){for(let f in r)l.setKey(f,r[f]);for(let f in l.value)f in r||l.setKey(f)};function u(r){r.key?r.key.startsWith(e)&&(r.newValue===null?s(r.key.slice(e.length),void 0):s(r.key.slice(e.length),a(r.newValue))):h({})}function c(){let r={...n};for(let f in d)f.startsWith(e)&&(r[f.slice(e.length)]=a(d[f]));l.set(r)}return $(l,()=>{if(c(),t.listen!==!1)return v.addEventListener(e,u,c),()=>{v.removeEventListener(e,u,c);for(let r in l.value)v.removeEventListener(e+r,u,c)}}),l}Object.freeze("");const _="e77af3f6-a0e3-44b7-82f8-b7c098d38022",z="https://js.hcaptcha.com/1/api.js",D=L(""),T=L(""),Q=w("kbve:");w("rent:");const W=async e=>{k(async()=>{T.set(e),console.log(`[LOG] ${T.get()}`)})},G=async e=>{Toastify({gravity:"bottom",position:"right",text:e,duration:5e3}).showToast()},I=async(e,n)=>{k(async()=>{W(`Storing ${n} into locker for ${e}`),Q.setKey(e,n)})};export{z as a,D as b,I as c,L as d,_ as h,Q as k,W as l,G as n};
