import{S as ie,i as oe,s as ue,u as te,v as se,w as ne,x as q,y as U,z as re,h as fe,j as ce,o as de,k as me,e as g,l as A,t as pe,c as _,a as N,A as P,m as B,p as he,d as b,b as c,f as x,g as m,E as ee,F as ge,r as _e,O as be,D as Q,K as Ve,q as K,B as X,I as Ge,H as xe}from"./index.62c63a4e.js";import{e as Y,A as j}from"./constants.e82e8530.js";import{W as ve}from"./WidgetWrapper.dd4a4674.js";import{d as ye,_ as Ee,Q as Z}from"./appwrite.3f3751a0.js";import{k as ke,n as L,c as z,l as we}from"./storage.4a41c484.js";import"./_commonjsHelpers.725317a4.js";function Ce(l,t,e){const s=l.slice();return s[4]=t[e],s}function $e(l){let t,e,s="Input your business name:",a,n,r,i;return{c(){t=g("div"),e=g("label"),e.textContent=s,a=A(),n=g("input"),this.h()},l(d){t=_(d,"DIV",{});var o=N(t);e=_(o,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1rpz5bv"&&(e.textContent=s),a=B(o),n=_(o,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),o.forEach(b),this.h()},h(){c(e,"for","username"),c(e,"class","block mb-2 text-sm font-medium"),c(n,"type","text"),c(n,"name","data"),c(n,"id","data"),c(n,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),c(n,"placeholder","Wild Goat Coffee"),n.required=!0},m(d,o){x(d,t,o),m(t,e),m(t,a),m(t,n),Q(n,l[2].business_name),r||(i=ee(n,"input",l[7]),r=!0)},p(d,o){o&4&&n.value!==d[2].business_name&&Q(n,d[2].business_name)},d(d){d&&b(t),r=!1,i()}}}function Ne(l){let t,e,s;return{c(){t=g("iframe"),this.h()},l(a){t=_(a,"IFRAME",{style:!0,title:!0,src:!0,width:!0,height:!0}),N(t).forEach(b),this.h()},h(){Ve(t,"background","#FFFFFF"),c(t,"title",e=l[4].$id),K(t.src,s=l[4].url)||c(t,"src",s),c(t,"width","800"),c(t,"height","800")},m(a,n){x(a,t,n)},p(a,n){n&8&&e!==(e=a[4].$id)&&c(t,"title",e),n&8&&!K(t.src,s=a[4].url)&&c(t,"src",s)},d(a){a&&b(t)}}}function Re(l){let t,e,s,a="Step 4: Create custom website for your business",n,r,i,d,o,p,E=l[1]?"Loading":"Generate Business Website",C,D,S,T,W="Generated:",I,h,J,V,v=l[0]&&!l[2].business_name&&$e(l),F=Y(l[3]),y=[];for(let f=0;f<F.length;f+=1)y[f]=Ne(Ce(l,F,f));return{c(){t=g("selection"),e=g("div"),s=g("h1"),s.textContent=a,n=A(),r=g("div"),i=g("form"),v&&v.c(),d=A(),o=g("button"),p=g("span"),C=pe(E),D=A(),S=g("div"),T=g("h2"),T.textContent=W,I=A(),h=g("div");for(let f=0;f<y.length;f+=1)y[f].c();this.h()},l(f){t=_(f,"SELECTION",{});var $=N(t);e=_($,"DIV",{class:!0});var u=N(e);s=_(u,"H1",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1mbmubc"&&(s.textContent=a),n=B(u),r=_(u,"DIV",{class:!0});var k=N(r);i=_(k,"FORM",{class:!0,action:!0});var O=N(i);v&&v.l(O),d=B(O),o=_(O,"BUTTON",{type:!0,class:!0});var w=N(o);p=_(w,"SPAN",{});var R=N(p);C=he(R,E),R.forEach(b),w.forEach(b),O.forEach(b),k.forEach(b),D=B(u),S=_(u,"DIV",{});var G=N(S);T=_(G,"H2",{"data-svelte-h":!0}),P(T)!=="svelte-1p0q7f"&&(T.textContent=W),I=B(G),h=_(G,"DIV",{class:!0});var H=N(h);for(let M=0;M<y.length;M+=1)y[M].l(H);H.forEach(b),G.forEach(b),u.forEach(b),$.forEach(b),this.h()},h(){c(s,"class","text-xl font-semibold text-white-1200 dark:text-white"),c(o,"type","submit"),c(o,"class","w-full bg-secondary hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"),o.disabled=l[1],c(i,"class","space-y-4 md:space-y-6"),c(i,"action","#"),c(r,"class","p-4"),c(h,"class","grid grid-cols-2 gap-2"),c(e,"class","p-6 sm:p-12")},m(f,$){x(f,t,$),m(t,e),m(e,s),m(e,n),m(e,r),m(r,i),v&&v.m(i,null),m(i,d),m(i,o),m(o,p),m(p,C),m(e,D),m(e,S),m(S,T),m(S,I),m(S,h);for(let u=0;u<y.length;u+=1)y[u]&&y[u].m(h,null);J||(V=ee(i,"submit",ge(l[5])),J=!0)},p(f,$){if(f[0]&&!f[2].business_name?v?v.p(f,$):(v=$e(f),v.c(),v.m(i,d)):v&&(v.d(1),v=null),$&2&&E!==(E=f[1]?"Loading":"Generate Business Website")&&_e(C,E),$&2&&(o.disabled=f[1]),$&8){F=Y(f[3]);let u;for(u=0;u<F.length;u+=1){const k=Ce(f,F,u);y[u]?y[u].p(k,$):(y[u]=Ne(k),y[u].c(),y[u].m(h,null))}for(;u<y.length;u+=1)y[u].d(1);y.length=F.length}},d(f){f&&b(t),v&&v.d(),be(y,f),J=!1,V()}}}function qe(l){let t,e;return t=new ve({props:{background:"https://kbve.com/assets/img/curved-images/wave.jpg",$$slots:{default:[Re]},$$scope:{ctx:l}}}),{c(){te(t.$$.fragment)},l(s){se(t.$$.fragment,s)},m(s,a){ne(t,s,a),e=!0},p(s,[a]){const n={};a&2097167&&(n.$$scope={dirty:a,ctx:s}),t.$set(n)},i(s){e||(q(t.$$.fragment,s),e=!0)},o(s){U(t.$$.fragment,s),e=!1},d(s){re(t,s)}}}let Me=!1;function Pe(l,t,e){let s;fe(l,ke,h=>e(10,s=h));let a=!1,n=!1,r=!1,i,d=j.CREATE_BUSINESS_WEBSITE_APPWRITE_FUNCTION,o,p,E,C=[];ce();const D=()=>p.business_name.length<1?(L("Data needs to be longer!"),!1):p.business_name.length>100?(L("Data needs to be shorter!"),!1):!0,S=()=>{L("Running"),D()&&T()},T=async()=>{try{e(1,a=!0),n=!0,o=JSON.stringify({businessName:p.business_name,businessId:p.$id,description:p.business_idea,images:s.images}),console.log(o);const h=await ye.createExecution(d,o);if(L("Loading."),h.status==="failed")throw new Error("Internal Error. Try again later.");h.response&&(L("Image Loaded"),e(4,E=JSON.parse(h.response)),E&&z("website",JSON.stringify(E)),W())}catch(h){h instanceof Error&&(we(h.message),L(h.message))}finally{e(1,a=!1)}},W=async()=>{try{const h=await Ee(j.DATABASE,j.WEBSITE,[Z.equal("business_id",p.$id),Z.orderDesc("created_at")]),J=JSON.parse(h);e(3,C=J.documents)}catch{}};de(()=>{e(2,p=JSON.parse(s.business)),W(),e(0,r=!0)}),me(()=>{});function I(){p.business_name=this.value,e(2,p)}return l.$$.update=()=>{l.$$.dirty&65&&r&&!Me&&(e(6,i=window.document.getElementById("skeleton")),i&&i.remove())},[r,a,p,C,E,S,i,I]}class Ue extends ie{constructor(t){super(),oe(this,t,Pe,qe,ue,{})}}function Se(l,t,e){const s=l.slice();return s[5]=t[e],s}function Te(l){let t,e,s="Input your business name:",a,n,r,i;return{c(){t=g("div"),e=g("label"),e.textContent=s,a=A(),n=g("input"),this.h()},l(d){t=_(d,"DIV",{});var o=N(t);e=_(o,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1rpz5bv"&&(e.textContent=s),a=B(o),n=_(o,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),o.forEach(b),this.h()},h(){c(e,"for","username"),c(e,"class","block mb-2 text-sm font-medium"),c(n,"type","text"),c(n,"name","data"),c(n,"id","data"),c(n,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),c(n,"placeholder","Wild Goat Coffee"),n.required=!0},m(d,o){x(d,t,o),m(t,e),m(t,a),m(t,n),Q(n,l[2].business_name),r||(i=ee(n,"input",l[8]),r=!0)},p(d,o){o&4&&n.value!==d[2].business_name&&Q(n,d[2].business_name)},d(d){d&&b(t),r=!1,i()}}}function Oe(l){let t,e;return{c(){t=g("img"),this.h()},l(s){t=_(s,"IMG",{src:!0,alt:!0,width:!0}),this.h()},h(){K(t.src,e=l[5].url)||c(t,"src",e),c(t,"alt",""),c(t,"width","300")},m(s,a){x(s,t,a)},p(s,a){a&8&&!K(t.src,e=s[5].url)&&c(t,"src",e)},d(s){s&&b(t)}}}function De(l){let t,e=l[5].url&&Oe(l);return{c(){e&&e.c(),t=X()},l(s){e&&e.l(s),t=X()},m(s,a){e&&e.m(s,a),x(s,t,a)},p(s,a){s[5].url?e?e.p(s,a):(e=Oe(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&b(t),e&&e.d(s)}}}function He(l){let t,e,s,a="Step 3: Create custom content",n,r,i="The more images you generate here, the better the website will look.",d,o,p,E,C,D,S=l[1]?"Loading":"Generate Business Image Content",T,W,I,h,J="Generated:",V,v,F,y,f=l[0]&&!l[2].business_name&&Te(l),$=Y(l[3]),u=[];for(let k=0;k<$.length;k+=1)u[k]=De(Se(l,$,k));return{c(){t=g("selection"),e=g("div"),s=g("h1"),s.textContent=a,n=A(),r=g("h1"),r.textContent=i,d=A(),o=g("div"),p=g("form"),f&&f.c(),E=A(),C=g("button"),D=g("span"),T=pe(S),W=A(),I=g("div"),h=g("h2"),h.textContent=J,V=A(),v=g("div");for(let k=0;k<u.length;k+=1)u[k].c();this.h()},l(k){t=_(k,"SELECTION",{});var O=N(t);e=_(O,"DIV",{class:!0});var w=N(e);s=_(w,"H1",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-cv5qnr"&&(s.textContent=a),n=B(w),r=_(w,"H1",{class:!0,"data-svelte-h":!0}),P(r)!=="svelte-11wgixy"&&(r.textContent=i),d=B(w),o=_(w,"DIV",{class:!0});var R=N(o);p=_(R,"FORM",{class:!0,action:!0});var G=N(p);f&&f.l(G),E=B(G),C=_(G,"BUTTON",{type:!0,class:!0});var H=N(C);D=_(H,"SPAN",{});var M=N(D);T=he(M,S),M.forEach(b),H.forEach(b),G.forEach(b),R.forEach(b),W=B(w),I=_(w,"DIV",{});var le=N(I);h=_(le,"H2",{"data-svelte-h":!0}),P(h)!=="svelte-1p0q7f"&&(h.textContent=J),V=B(le),v=_(le,"DIV",{class:!0});var Ie=N(v);for(let ae=0;ae<u.length;ae+=1)u[ae].l(Ie);Ie.forEach(b),le.forEach(b),w.forEach(b),O.forEach(b),this.h()},h(){c(s,"class","text-2xl font-semibold text-white-900 dark:text-white"),c(r,"class","text-xl font-semibold text-white-1200 dark:text-white"),c(C,"type","submit"),c(C,"class","w-full bg-secondary hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"),C.disabled=l[1],c(p,"class","space-y-4 md:space-y-6"),c(p,"action","#"),c(o,"class","p-4"),c(v,"class","grid grid-cols-6 gap-2"),c(e,"class","p-6 sm:p-12")},m(k,O){x(k,t,O),m(t,e),m(e,s),m(e,n),m(e,r),m(e,d),m(e,o),m(o,p),f&&f.m(p,null),m(p,E),m(p,C),m(C,D),m(D,T),m(e,W),m(e,I),m(I,h),m(I,V),m(I,v);for(let w=0;w<u.length;w+=1)u[w]&&u[w].m(v,null);F||(y=ee(p,"submit",ge(l[6])),F=!0)},p(k,O){if(k[0]&&!k[2].business_name?f?f.p(k,O):(f=Te(k),f.c(),f.m(p,E)):f&&(f.d(1),f=null),O&2&&S!==(S=k[1]?"Loading":"Generate Business Image Content")&&_e(T,S),O&2&&(C.disabled=k[1]),O&8){$=Y(k[3]);let w;for(w=0;w<$.length;w+=1){const R=Se(k,$,w);u[w]?u[w].p(R,O):(u[w]=De(R),u[w].c(),u[w].m(v,null))}for(;w<u.length;w+=1)u[w].d(1);u.length=$.length}},d(k){k&&b(t),f&&f.d(),be(u,k),F=!1,y()}}}function Le(l){let t,e;return t=new Ue({}),{c(){te(t.$$.fragment)},l(s){se(t.$$.fragment,s)},m(s,a){ne(t,s,a),e=!0},i(s){e||(q(t.$$.fragment,s),e=!0)},o(s){U(t.$$.fragment,s),e=!1},d(s){re(t,s)}}}function je(l){let t,e,s,a;t=new ve({props:{background:"https://kbve.com/assets/img/curved-images/wave.jpg",$$slots:{default:[He]},$$scope:{ctx:l}}});let n=l[4].content&&l[2]&&l[5]&&l[2].$id==l[5].business_id&&Le();return{c(){te(t.$$.fragment),e=A(),n&&n.c(),s=X()},l(r){se(t.$$.fragment,r),e=B(r),n&&n.l(r),s=X()},m(r,i){ne(t,r,i),x(r,e,i),n&&n.m(r,i),x(r,s,i),a=!0},p(r,[i]){const d={};i&2097167&&(d.$$scope={dirty:i,ctx:r}),t.$set(d),r[4].content&&r[2]&&r[5]&&r[2].$id==r[5].business_id?n?i&52&&q(n,1):(n=Le(),n.c(),q(n,1),n.m(s.parentNode,s)):n&&(Ge(),U(n,1,1,()=>{n=null}),xe())},i(r){a||(q(t.$$.fragment,r),q(n),a=!0)},o(r){U(t.$$.fragment,r),U(n),a=!1},d(r){r&&(b(e),b(s)),re(t,r),n&&n.d(r)}}}let ze=!1;function Qe(l,t,e){let s;fe(l,ke,h=>e(4,s=h));let a=!1,n=!1,r=!1,i,d=j.CREATE_BUSINESS_CONTENT_APPWRITE_FUNCTION,o,p,E,C=[];ce();const D=()=>p.business_name.length<1?(L("Data needs to be longer!"),!1):p.business_name.length>100?(L("Data needs to be shorter!"),!1):!0,S=()=>{L("Running"),D()&&T()},T=async()=>{try{e(1,a=!0),n=!0,o=JSON.stringify({businessName:p.business_name,businessId:p.$id}),console.log(o);const h=await ye.createExecution(d,o);if(L("Loading."),h.status==="failed")throw new Error("Internal Error. Try again later.");h.response&&(L("Image Loaded"),e(5,E=JSON.parse(h.response)),E&&z("content",JSON.stringify(E)),W())}catch(h){h instanceof Error&&(we(h.message),L(h.message))}finally{e(1,a=!1)}},W=async()=>{try{const h=await Ee(j.DATABASE,j.IMAGE_CONTENT,[Z.equal("business_id",p.$id),Z.orderDesc("created_at")]),J=JSON.parse(h);e(3,C=J.documents),z("images",JSON.stringify(C.map(V=>V.url))),e(5,E=C[0]),z("content",JSON.stringify(E))}catch{}};de(()=>{e(2,p=JSON.parse(s.business)),W(),e(0,r=!0)}),me(()=>{});function I(){p.business_name=this.value,e(2,p)}return l.$$.update=()=>{l.$$.dirty&129&&r&&!ze&&(e(7,i=window.document.getElementById("skeleton")),i&&i.remove())},[r,a,p,C,s,E,S,i,I]}class Ke extends ie{constructor(t){super(),oe(this,t,Qe,je,ue,{})}}function Ae(l,t,e){const s=l.slice();return s[5]=t[e],s}function Be(l){let t,e,s="Input your business name:",a,n,r,i;return{c(){t=g("div"),e=g("label"),e.textContent=s,a=A(),n=g("input"),this.h()},l(d){t=_(d,"DIV",{});var o=N(t);e=_(o,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(e)!=="svelte-wp5x2z"&&(e.textContent=s),a=B(o),n=_(o,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),o.forEach(b),this.h()},h(){c(e,"for","username"),c(e,"class","block mb-2 text-sm font-medium"),c(n,"type","text"),c(n,"name","data"),c(n,"id","data"),c(n,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),c(n,"placeholder","Wild Goat Coffee"),n.required=!0},m(d,o){x(d,t,o),m(t,e),m(t,a),m(t,n),Q(n,l[3].business_name),r||(i=ee(n,"input",l[8]),r=!0)},p(d,o){o&8&&n.value!==d[3].business_name&&Q(n,d[3].business_name)},d(d){d&&b(t),r=!1,i()}}}function We(l){let t,e;return{c(){t=g("img"),this.h()},l(s){t=_(s,"IMG",{src:!0,alt:!0,width:!0}),this.h()},h(){K(t.src,e=l[5].url)||c(t,"src",e),c(t,"alt",""),c(t,"width","300")},m(s,a){x(s,t,a)},p(s,a){a&4&&!K(t.src,e=s[5].url)&&c(t,"src",e)},d(s){s&&b(t)}}}function Xe(l){let t,e,s,a="Step 2: Create your logo",n,r,i,d,o,p,E=l[1]?"Loading":"Create Logo",C,D,S,T,W="Generated:",I,h,J,V,v=l[0]&&!l[3].business_name&&Be(l),F=Y(l[2]),y=[];for(let f=0;f<F.length;f+=1)y[f]=We(Ae(l,F,f));return{c(){t=g("selection"),e=g("div"),s=g("h1"),s.textContent=a,n=A(),r=g("div"),i=g("form"),v&&v.c(),d=A(),o=g("button"),p=g("span"),C=pe(E),D=A(),S=g("div"),T=g("h2"),T.textContent=W,I=A(),h=g("div");for(let f=0;f<y.length;f+=1)y[f].c();this.h()},l(f){t=_(f,"SELECTION",{});var $=N(t);e=_($,"DIV",{class:!0});var u=N(e);s=_(u,"H1",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-nixarc"&&(s.textContent=a),n=B(u),r=_(u,"DIV",{class:!0});var k=N(r);i=_(k,"FORM",{class:!0,action:!0});var O=N(i);v&&v.l(O),d=B(O),o=_(O,"BUTTON",{type:!0,class:!0});var w=N(o);p=_(w,"SPAN",{});var R=N(p);C=he(R,E),R.forEach(b),w.forEach(b),O.forEach(b),k.forEach(b),D=B(u),S=_(u,"DIV",{});var G=N(S);T=_(G,"H2",{"data-svelte-h":!0}),P(T)!=="svelte-1p0q7f"&&(T.textContent=W),I=B(G),h=_(G,"DIV",{class:!0});var H=N(h);for(let M=0;M<y.length;M+=1)y[M].l(H);H.forEach(b),G.forEach(b),u.forEach(b),$.forEach(b),this.h()},h(){c(s,"class","text-2xl font-semibold text-white-900 dark:text-white"),c(o,"type","submit"),c(o,"class","w-full bg-secondary hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"),o.disabled=l[1],c(i,"class","space-y-4 md:space-y-6"),c(i,"action","#"),c(r,"class","p-4"),c(h,"class","grid grid-cols-6 gap-2"),c(e,"class","p-6 sm:p-12")},m(f,$){x(f,t,$),m(t,e),m(e,s),m(e,n),m(e,r),m(r,i),v&&v.m(i,null),m(i,d),m(i,o),m(o,p),m(p,C),m(e,D),m(e,S),m(S,T),m(S,I),m(S,h);for(let u=0;u<y.length;u+=1)y[u]&&y[u].m(h,null);J||(V=ee(i,"submit",ge(l[6])),J=!0)},p(f,$){if(f[0]&&!f[3].business_name?v?v.p(f,$):(v=Be(f),v.c(),v.m(i,d)):v&&(v.d(1),v=null),$&2&&E!==(E=f[1]?"Loading":"Create Logo")&&_e(C,E),$&2&&(o.disabled=f[1]),$&4){F=Y(f[2]);let u;for(u=0;u<F.length;u+=1){const k=Ae(f,F,u);y[u]?y[u].p(k,$):(y[u]=We(k),y[u].c(),y[u].m(h,null))}for(;u<y.length;u+=1)y[u].d(1);y.length=F.length}},d(f){f&&b(t),v&&v.d(),be(y,f),J=!1,V()}}}function Fe(l){let t,e;return t=new Ke({}),{c(){te(t.$$.fragment)},l(s){se(t.$$.fragment,s)},m(s,a){ne(t,s,a),e=!0},i(s){e||(q(t.$$.fragment,s),e=!0)},o(s){U(t.$$.fragment,s),e=!1},d(s){re(t,s)}}}function Ye(l){let t,e,s,a;t=new ve({props:{background:"https://kbve.com/assets/img/curved-images/wave.jpg",$$slots:{default:[Xe]},$$scope:{ctx:l}}});let n=l[4].logo&&l[3]&&l[5]&&l[3].$id==l[5].business_id&&Fe();return{c(){te(t.$$.fragment),e=A(),n&&n.c(),s=X()},l(r){se(t.$$.fragment,r),e=B(r),n&&n.l(r),s=X()},m(r,i){ne(t,r,i),x(r,e,i),n&&n.m(r,i),x(r,s,i),a=!0},p(r,[i]){const d={};i&524303&&(d.$$scope={dirty:i,ctx:r}),t.$set(d),r[4].logo&&r[3]&&r[5]&&r[3].$id==r[5].business_id?n?i&56&&q(n,1):(n=Fe(),n.c(),q(n,1),n.m(s.parentNode,s)):n&&(Ge(),U(n,1,1,()=>{n=null}),xe())},i(r){a||(q(t.$$.fragment,r),q(n),a=!0)},o(r){U(t.$$.fragment,r),U(n),a=!1},d(r){r&&(b(e),b(s)),re(t,r),n&&n.d(r)}}}let Ze=!1,Je="64dfee82eada6467290f";function et(l,t,e){let s;fe(l,ke,I=>e(4,s=I));let a=!1,n=!1,r=!1,i,d,o,p=[],E;ce();const C=()=>E.business_name.length<1?(L("Business name needs to be longer!"),!1):Je.length<4?(L("Task needs to be longer!"),!1):!0,D=()=>{L("Running"),C()&&S()},S=async()=>{try{e(1,a=!0),n=!0,d=JSON.stringify({businessName:E.business_name,businessId:E.$id}),console.log(d);const I=await ye.createExecution(Je,d);if(L("Loading."),I.status==="failed")throw new Error("Internal Error. Try again later.");I.response&&(L("Image Loaded"),e(5,o=JSON.parse(I.response)),o&&z("logo",JSON.stringify(o)),T())}catch(I){I instanceof Error&&(we(I.message),L(I.message))}finally{e(1,a=!1)}},T=async()=>{try{const I=await Ee(j.DATABASE,j.LOGO,[Z.equal("business_id",E.$id),Z.orderDesc("created_at")]),h=JSON.parse(I);e(2,p=h.documents),e(5,o=p[0]),z("logo",JSON.stringify(o))}catch{}};de(()=>{e(3,E=JSON.parse(s.business)),T(),e(0,r=!0)}),me(()=>{});function W(){E.business_name=this.value,e(3,E)}return l.$$.update=()=>{l.$$.dirty&129&&r&&!Ze&&(e(7,i=window.document.getElementById("skeleton")),i&&i.remove())},[r,a,p,E,s,o,D,i,W]}class it extends ie{constructor(t){super(),oe(this,t,et,Ye,ue,{})}}export{it as default};
